<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo de Contas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .game {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 15px;
    }
    #scoreboard {
      font-size: 1rem;
      margin-bottom: 10px;
    }
    #question {
      font-size: 2rem;
      margin: 20px 0;
    }
    .options {
      display: flex;
      justify-content: space-around;
      gap: 10px;
    }
    .btn {
      flex: 1;
      padding: 15px;
      font-size: 1.2rem;
      border: none;
      border-radius: 8px;
      background: #eee;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn:hover {
      background: #ddd;
    }
    .correct {
      background: #4CAF50 !important;
      color: white;
    }
    .wrong {
      background: #E53935 !important;
      color: white;
    }
    .level-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    .level-btn {
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #2196F3;
      color: white;
      font-weight: bold;
      transition: 0.3s;
    }
    .level-btn:hover {
      background: #1976D2;
    }
    #timer {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.2rem;
      font-weight: bold;
      color: #E53935;
      display: none;
    }
  </style>
</head>
<body>
  <div class="game">
    <h1>Jogo de Contas üßÆ</h1>
    <div class="level-buttons">
      <button class="level-btn" onclick="setLevel('facil')">F√°cil</button>
      <button class="level-btn" onclick="setLevel('medio')">M√©dio</button>
      <button class="level-btn" onclick="setLevel('dificil')">Dif√≠cil</button>
    </div>
    <div id="timer">40</div>
    <div id="scoreboard">‚úÖ Acertos: 0 | ‚ùå Erros: 0</div>
    <div id="question">Escolha a dificuldade</div>
    <div class="options">
      <button class="btn" id="option1"></button>
      <button class="btn" id="option2"></button>
    </div>
  </div>

  <script>
    const questionEl = document.getElementById("question");
    const option1 = document.getElementById("option1");
    const option2 = document.getElementById("option2");
    const timerEl = document.getElementById("timer");
    const scoreboardEl = document.getElementById("scoreboard");

    let currentQuestion = null;
    let wrongList = [];
    let level = null;
    let timer = null;
    let timeLeft = 40;
    let acertos = 0;
    let erros = 0;

    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateQuestion() {
      let operations;
      if (level === "facil") operations = ["+", "-"];
      else if (level === "medio") operations = ["*", "/"];
      else operations = ["+", "-", "*", "/", "‚àö"];

      let op = operations[randomInt(0, operations.length - 1)];
      let a = randomInt(1, 20);
      let b = randomInt(1, 20);
      let question, answer;

      switch(op) {
        case "+":
          question = `${a} + ${b}`;
          answer = a + b;
          break;
        case "-":
          question = `${a} - ${b}`;
          answer = a - b;
          break;
        case "*":
          question = `${a} √ó ${b}`;
          answer = a * b;
          break;
        case "/":
          a = a * b; // garante divis√£o exata
          question = `${a} √∑ ${b}`;
          answer = a / b;
          break;
        case "‚àö":
          let sq = a * a;
          question = `‚àö${sq}`;
          answer = a;
          break;
      }
      return { question, answer };
    }

    function loadQuestion(fromWrong = false) {
      if (!level) return;

      if (fromWrong && wrongList.length > 0) {
        currentQuestion = wrongList.shift();
      } else {
        currentQuestion = generateQuestion();
      }

      questionEl.textContent = currentQuestion.question;

      let wrongAnswer = currentQuestion.answer + (Math.random() > 0.5 ? randomInt(1,3) : -randomInt(1,3));
      if (wrongAnswer === currentQuestion.answer) wrongAnswer += 2;

      let answers = [currentQuestion.answer, wrongAnswer];
      answers.sort(() => Math.random() - 0.5);

      option1.textContent = answers[0];
      option2.textContent = answers[1];

      option1.className = "btn";
      option2.className = "btn";

      if (level === "dificil") {
        startTimer();
      } else {
        stopTimer();
      }
    }

    function checkAnswer(btn) {
      if (parseInt(btn.textContent) === currentQuestion.answer) {
        btn.classList.add("correct");
        acertos++;
        updateScore();
        setTimeout(() => loadQuestion(Math.random() < 0.3), 800);
      } else {
        btn.classList.add("wrong");
        erros++;
        updateScore();
        wrongList.push(currentQuestion);
        setTimeout(() => loadQuestion(true), 800);
      }
    }

    function setLevel(selected) {
      level = selected;
      acertos = 0;
      erros = 0;
      updateScore();
      wrongList = [];
      questionEl.textContent = "Carregando...";
      loadQuestion();
    }

    function updateScore() {
      scoreboardEl.textContent = `‚úÖ Acertos: ${acertos} | ‚ùå Erros: ${erros}`;
    }

    function startTimer() {
      stopTimer();
      timeLeft = 40;
      timerEl.style.display = "block";
      timerEl.textContent = timeLeft;

      timer = setInterval(() => {
        timeLeft--;
        timerEl.textContent = timeLeft;
        if (timeLeft <= 0) {
          stopTimer();
          erros++;
          updateScore();
          loadQuestion(true); // pula para a pr√≥xima
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timer);
      timerEl.style.display = "none";
    }

    option1.addEventListener("click", () => checkAnswer(option1));
    option2.addEventListener("click", () => checkAnswer(option2));
  </script>
</body>
</html>
